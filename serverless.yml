service: infrajudge-architecture-api

provider:
  name: aws
  runtime: nodejs18.x
  region: us-east-1
  stage: prod
  memorySize: 1024
  timeout: 60
  iam:
    role:
      statements:
        - Effect: Allow
          Action:
            - bedrock:InvokeModel
          Resource: 
            - arn:aws:bedrock:us-east-1::foundation-model/amazon.nova-lite-v1:0
            - arn:aws:bedrock:*:*:inference-profile/*

functions:
  generateArchitecture:
    handler: lambda-architecture.handler
    events:
      - http:
          path: /generate-architecture
          method: post
          cors: true
      - http:
          path: /generate-architecture
          method: options
          cors: true

plugins:
  - serverless-offline

package:
  exclude:
    - node_modules/**
    - .git/**
    - .kiro/**
    - public/**
    - tests/**
    - '*.md'
